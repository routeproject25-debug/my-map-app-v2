# üìã –ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø—Ä–æ–µ–∫—Ç—É my-map-app-v2

## üéØ –û–≥–ª—è–¥ –ø—Ä–æ–µ–∫—Ç—É

**my-map-app-v2** ‚Äî —Ü–µ –≤–µ–±-–¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ª–æ–≥—ñ—Å—Ç–∏—á–Ω–∏–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏ –∑ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—é –∫–∞—Ä—Ç–æ—é –Ω–∞ –±–∞–∑—ñ Mapbox GL JS —Ç–∞ Firebase (Authentication, Firestore, Cloud Functions).

### –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:
- üó∫Ô∏è –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞ –∑ –º–∞–ª—é–≤–∞–Ω–Ω—è–º –º–∞—Ä—à—Ä—É—Ç—ñ–≤
- üìä –ï–∫—Å–ø–æ—Ä—Ç/—ñ–º–ø–æ—Ä—Ç –º–∞—Ä—à—Ä—É—Ç—ñ–≤ (Excel, JSON, KML)
- üë• –ë–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø—É (admin, logist, user, security)
- üîê –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Google —Ç–∞ Email/Password
- üíæ –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —É Firestore
- üì± Telegram –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø—Ä–æ –Ω–æ–≤—ñ –º–∞—Ä—à—Ä—É—Ç–∏
- üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å
- üß™ –†–µ–∂–∏–º —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
my-map-app-v2/
‚îú‚îÄ‚îÄ .env                          # –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ .env.example                  # –ü—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö
‚îú‚îÄ‚îÄ package.json                  # Node.js –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ server.js                     # Express —Å–µ—Ä–≤–µ—Ä (–ª–æ–∫–∞–ª—å–Ω–∏–π dev)
‚îú‚îÄ‚îÄ firebase.json                 # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Firebase Hosting
‚îú‚îÄ‚îÄ firestore.rules               # –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–ø–µ–∫–∏ Firestore
‚îú‚îÄ‚îÄ firestore.indexes.json        # –Ü–Ω–¥–µ–∫—Å–∏ Firestore
‚îÇ
‚îú‚îÄ‚îÄ functions/                    # Firebase Cloud Functions
‚îÇ   ‚îú‚îÄ‚îÄ index.js                  # –°–µ—Ä–≤–µ—Ä–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ package.json              # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ñ—É–Ω–∫—Ü—ñ–π
‚îÇ
‚îú‚îÄ‚îÄ cloudflare-worker/            # Cloudflare Worker (Telegram)
‚îÇ   ‚îú‚îÄ‚îÄ src/worker.js             # Worker –∫–æ–¥
‚îÇ   ‚îî‚îÄ‚îÄ wrangler.toml             # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Worker
‚îÇ
‚îî‚îÄ‚îÄ public/                       # –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ (frontend)
    ‚îú‚îÄ‚îÄ index.html                # –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ (–∫–∞—Ä—Ç–∞)
    ‚îú‚îÄ‚îÄ login.html                # –°—Ç–æ—Ä—ñ–Ω–∫–∞ –≤—Ö–æ–¥—É
    ‚îú‚îÄ‚îÄ admin.html                # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
    ‚îú‚îÄ‚îÄ review.html               # –ü–æ–≥–æ–¥–∂–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤
    ‚îú‚îÄ‚îÄ calculator.html           # –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤–∞—Ä—Ç–æ—Å—Ç—ñ
   ‚îú‚îÄ‚îÄ navigate.html             # –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –º–∞—Ä—à—Ä—É—Ç–æ–º
   ‚îú‚îÄ‚îÄ map-viewer.html           # –°–ø—Ä–æ—â–µ–Ω–∞ –∫–∞—Ä—Ç–∞ –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó –≤ –ø–æ–ª—ñ
    ‚îú‚îÄ‚îÄ Firestore_Viewe.html      # –ü–µ—Ä–µ–≥–ª—è–¥ Firestore
    ‚îú‚îÄ‚îÄ auth-guard.js             # –ó–∞—Ö–∏—Å—Ç —Å—Ç–æ—Ä—ñ–Ω–æ–∫
    ‚îÇ
    ‚îú‚îÄ‚îÄ config/                   # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
    ‚îÇ   ‚îú‚îÄ‚îÄ config.js             # Firebase –∫–æ–Ω—Ñ—ñ–≥ + API –∫–ª—é—á—ñ
    ‚îÇ   ‚îú‚îÄ‚îÄ tilesets.json         # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥–µ–æ–∑–æ–Ω
    ‚îÇ   ‚îî‚îÄ‚îÄ tilesets.schema.json  # –°—Ö–µ–º–∞ tilesets
    ‚îÇ
    ‚îú‚îÄ‚îÄ export/                   # –ï–∫—Å–ø–æ—Ä—Ç –º–∞—Ä—à—Ä—É—Ç—ñ–≤
    ‚îÇ   ‚îú‚îÄ‚îÄ index.html            # –¢–∞–±–ª–∏—Ü—è –∑ –µ–∫—Å–ø–æ—Ä—Ç–æ–º
    ‚îÇ   ‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –µ–∫—Å–ø–æ—Ä—Ç—É
    ‚îÇ
    ‚îú‚îÄ‚îÄ import/                   # –Ü–º–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö
    ‚îÇ   ‚îú‚îÄ‚îÄ index.html            # –Ü–º–ø–æ—Ä—Ç –¥–æ–≤—ñ–¥–Ω–∏–∫–∞
    ‚îÇ   ‚îî‚îÄ‚îÄ upload-routes.html    # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤
    ‚îÇ
    ‚îú‚îÄ‚îÄ admin/                    # –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å
    ‚îÇ   ‚îú‚îÄ‚îÄ geojson-builder.html  # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è GeoJSON
    ‚îÇ   ‚îú‚îÄ‚îÄ import-codes.html     # –Ü–º–ø–æ—Ä—Ç –∫–æ–¥—ñ–≤
   ‚îÇ   ‚îú‚îÄ‚îÄ stats.html            # –ì—Ä–∞—Ñ—ñ–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    ‚îÇ   ‚îî‚îÄ‚îÄ tilesets.html         # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–∞–π–ª—Å–µ—Ç–∞–º–∏
    ‚îÇ
    ‚îú‚îÄ‚îÄ styles/                   # –°—Ç–∏–ª—ñ —Ç–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ common.css            # –°–ø—ñ–ª—å–Ω—ñ —Å—Ç–∏–ª—ñ
    ‚îÇ   ‚îú‚îÄ‚îÄ header.js             # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç header
    ‚îÇ   ‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Å—Ç–∏–ª—ñ–≤
    ‚îÇ
    ‚îî‚îÄ‚îÄ img/                      # –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è
```

---

## üîë –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π —Ç–∞ –¥–æ—Å—Ç—É–ø—É

### –†–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

| –†–æ–ª—å | –î–æ—Å—Ç—É–ø | –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ |
|------|--------|-----------|
| **admin** | –ü–æ–≤–Ω–∏–π | –í—Å–µ: –º–∞—Ä—à—Ä—É—Ç–∏, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è, —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ |
| **logist** | –û–±–º–µ–∂–µ–Ω–∏–π —Ö–∞–±–∞–º–∏ | –°—Ç–≤–æ—Ä–µ–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤ —É —Å–≤–æ—ó—Ö —Ö–∞–±–∞—Ö |
| **user** | –¢—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥ | –ü–µ—Ä–µ–≥–ª—è–¥ –∫–∞—Ä—Ç–∏ —Ç–∞ –º–∞—Ä—à—Ä—É—Ç—ñ–≤ —É —Å–≤–æ—ó—Ö —Ö–∞–±–∞—Ö |
| **security** | –ü–æ–≥–æ–¥–∂–µ–Ω–Ω—è | –ü–æ–≥–æ–¥–∂–µ–Ω–Ω—è/–≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤ |
| **pending** | –ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ | –û—á—ñ–∫—É—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º |

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–æ–ª—ñ
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –º–∞—Ç–∏ –æ—Å–Ω–æ–≤–Ω—É —Ä–æ–ª—å + –¥–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–æ–ª—ñ (–ø–æ–ª–µ `additionalRoles[]` —É Firestore).  
–ü—Ä–∏–∫–ª–∞–¥: logist + security (—Å—Ç–≤–æ—Ä—é—î –º–∞—Ä—à—Ä—É—Ç–∏ –¢–ê –ø–æ–≥–æ–¥–∂—É—î —ó—Ö).

### –•–∞–±–∏ (Hub Access)
- –ö–æ–∂–µ–Ω –º–∞—Ä—à—Ä—É—Ç –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–π –¥–æ —Ö–∞–±—É (Hub)
- –õ–æ–≥—ñ—Å—Ç–∏ —Ç–∞ —é–∑–µ—Ä–∏ –±–∞—á–∞—Ç—å —Ç—ñ–ª—å–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∏ —Å–≤–æ—ó—Ö —Ö–∞–±—ñ–≤ (–ø–æ–ª–µ `allowedHubs[]`)
- –ê–¥–º—ñ–Ω–∏ —Ç–∞ security –±–∞—á–∞—Ç—å –≤—Å—ñ —Ö–∞–±–∏
- –ü–æ—Ä–æ–∂–Ω—ñ–π –º–∞—Å–∏–≤ —Ö–∞–±—ñ–≤ = –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö —Ö–∞–±—ñ–≤

---

## üó∫Ô∏è –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ (index.html)

### –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:
1. **–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞ Mapbox GL JS**
   - –ë–∞–∑–æ–≤—ñ —Å—Ç–∏–ª—ñ: streets, satellite, outdoors
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –ø—ñ–¥–ø–∏—Å—ñ–≤ (name_uk)
   - –ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

2. **–ú–∞–ª—é–≤–∞–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤**
   - –ö–ª—ñ–∫ –ø–æ –∫–∞—Ä—Ç—ñ –¥–æ–¥–∞—î —Ç–æ—á–∫—É
   - –ü–æ–¥–≤—ñ–π–Ω–∏–π –∫–ª—ñ–∫ –∑–∞–≤–µ—Ä—à—É—î –ª—ñ–Ω—ñ—é
   - –ö–Ω–æ–ø–∫–∞ "–ó–∞–∫—ñ–Ω—á–∏—Ç–∏ –º–∞–ª—é–≤–∞–Ω–Ω—è" –∑–±–µ—Ä—ñ–≥–∞—î –º–∞—Ä—à—Ä—É—Ç

3. **–§–æ—Ä–º–∞ –º–∞—Ä—à—Ä—É—Ç—É**
   - –í–∏–±—ñ—Ä —Ç–æ—á–æ–∫ "–í—ñ–¥" —Ç–∞ "–î–æ" –∑ –¥–æ–≤—ñ–¥–Ω–∏–∫–∞
   - –ê–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –≥–µ–æ–∑–æ–Ω –∑–∞ –∫–ª—ñ–∫–æ–º –Ω–∞ –∫–∞—Ä—Ç—ñ
   - –ü—Ä–æ–º—ñ–∂–Ω—ñ –ø—É–Ω–∫—Ç–∏ (via points)
   - –¢–∏–ø –º–∞—Ä—à—Ä—É—Ç—É: –û—Å–Ω–æ–≤–Ω–∏–π, –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π1, –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π2
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è (–∫—É–ª—å—Ç—É—Ä–∞)

4. **–ì–µ–æ–∑–æ–Ω–∏ (Tilesets)**
   - –í–µ–∫—Ç–æ—Ä–Ω—ñ —à–∞—Ä–∏ –∑ Mapbox Tilesets
   - –ó–∞–ª–∏–≤–∫–∞ + –æ–±–≤–µ–¥–µ–Ω–Ω—è
   - –ü–æ–ø–∞–ø–∏ –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ –∑–æ–Ω—É
   - –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ —Ö–∞–±–∞–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

5. **–ü–µ—Ä–µ–≥–ª—è–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤**
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑—ñ —Å–ø–∏—Å–∫—É
   - –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–∞ –∫–∞—Ä—Ç—ñ
   - –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö

6. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å** (—Ç—ñ–ª—å–∫–∏ –¥–ª—è admin)
   - –û–Ω–ª–∞–π–Ω –∑–∞—Ä–∞–∑
   - –°—å–æ–≥–æ–¥–Ω—ñ / –ó–∞ —Ç–∏–∂–¥–µ–Ω—å / –í—Å—å–æ–≥–æ
   - –£–Ω—ñ–∫–∞–ª—å–Ω—ñ –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á—ñ

### –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó:
- Mapbox GL JS v2.15.0
- Firebase Auth + Firestore
- Firestore onSnapshot (real-time)
- localStorage –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è

---

## üîê –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (login.html)

### –ú–µ—Ç–æ–¥–∏ –≤—Ö–æ–¥—É:
1. **Email/–ü–∞—Ä–æ–ª—å** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ —Ñ–æ—Ä–º–∞
2. **Google OAuth** ‚Äî —á–µ—Ä–µ–∑ popup/redirect

### –õ–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- **admin** ‚Üí `/index.html` (–∫–∞—Ä—Ç–∞)
- **logist** ‚Üí `/index.html`
- **user** ‚Üí `/index.html`
- **security** ‚Üí `/review.html` (–ø–æ–≥–æ–¥–∂–µ–Ω–Ω—è)
- **pending** ‚Üí –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–∞ login –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º "–û—á—ñ–∫—É—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è"

### –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö —Å–µ—Å—ñ–π:
- –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏–¥–∞–ª–µ–Ω–∏–π –∑ Firebase Auth, –∞–ª–µ —Å–µ—Å—ñ—è –∂–∏–≤–∞ ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π `signOut()`
- Firestore –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è `users/{uid}` —É `auth-guard.js`

### –§–æ–Ω–æ–≤–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞:
- –ì—Ä–∞–¥—ñ—î–Ω—Ç–Ω–∞ –∞–Ω—ñ–º–∞—Ü—ñ—è –∑ –ª–æ–≥–æ—Ç–∏–ø–æ–º
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω

---

## üì§ –ï–∫—Å–ø–æ—Ä—Ç –º–∞—Ä—à—Ä—É—Ç—ñ–≤ (export/index.html)

### –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:
1. **–¢–∞–±–ª–∏—Ü—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤**
   - –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è (1000 –∑–∞–ø–∏—Å—ñ–≤ –∑–∞ —Ä–∞–∑)
   - –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –∫–æ–ª–æ–Ω–∫–∞–º–∏
   - Excel-like —Ñ—ñ–ª—å—Ç—Ä–∏ –∑ dropdown
   - –í–∏–¥–∏–º—ñ—Å—Ç—å –∫–æ–ª–æ–Ω–æ–∫ (—á–µ–∫–±–æ–∫—Å–∏)
   - –ê–≤—Ç–æ—à–∏—Ä–∏–Ω–∞/—Ä—É—á–Ω–µ —Ä–æ–∑—Ç—è–≥—É–≤–∞–Ω–Ω—è –∫–æ–ª–æ–Ω–æ–∫

2. **–§—ñ–ª—å—Ç—Ä–∏:**
   - –•–∞–±, –í—ñ–¥, –î–æ, –¢–∏–ø, –î–∞—Ç–∞, –ü—ñ–¥—Ä–æ–∑–¥—ñ–ª, –í—ñ–¥—Å—Ç–∞–Ω—å, –õ–æ–≥—ñ—Å—Ç
   - üß™ **–¢—ñ–ª—å–∫–∏ —Ç–µ—Å—Ç–æ–≤—ñ –º–∞—Ä—à—Ä—É—Ç–∏** (isTest = true) ‚Äî —Ç—ñ–ª—å–∫–∏ –¥–ª—è admin

3. **–ï–∫—Å–ø–æ—Ä—Ç —Ñ–æ—Ä–º–∞—Ç—ñ–≤:**
   - **Excel** (.xlsx) ‚Äî –∑ –≤–∏–¥–∏–º–∏–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏
   - **JSON** ‚Äî –ø–æ–≤–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∞—Ä—à—Ä—É—Ç—É
   - **KML** ‚Äî –¥–ª—è Google Earth/Maps
   - ZIP –∞—Ä—Ö—ñ–≤–∏ –¥–ª—è –º–Ω–æ–∂–∏–Ω–Ω–æ–≥–æ –µ–∫—Å–ø–æ—Ä—Ç—É

4. **–ö–∞—Ä—Ç–∞ –≤–Ω–∏–∑—É:**
   - –ö–ª—ñ–∫ –ø–æ —Ä—è–¥–∫—É ‚Üí –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—É
   - –ü—Ä–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –¥–æ –¥–æ—Ä—ñ–≥ (Mapbox Directions API)
   - –ü—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è –≥–µ–æ–∑–æ–Ω "–í—ñ–¥/–î–æ"
   - –†–µ—Å–∞–π–∑ –ø–∞–Ω–µ–ª—ñ –∫–∞—Ä—Ç–∏

5. **–î—ñ—ó –Ω–∞–¥ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏:**
   - –ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è (–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è)
   - –ü–µ—Ä–µ–≥–ª—è–¥ JSON
   - –ü–æ–≥–æ–¥–∂–µ–Ω–Ω—è (–¥–ª—è security/admin)
   - –í–∏–¥–∞–ª–µ–Ω–Ω—è (—Ç—ñ–ª—å–∫–∏ admin)

### –î–æ—Å—Ç—É–ø:
- admin, logist, user, security (–∫–æ–∂–µ–Ω –±–∞—á–∏—Ç—å —Å–≤–æ—ó —Ö–∞–±–∏)

---

## üì• –Ü–º–ø–æ—Ä—Ç (import/)

### 1. –î–æ–≤—ñ–¥–Ω–∏–∫ —Ç–æ—á–æ–∫ (import/index.html)
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è CSV/TSV –∞–±–æ –∫–æ–ø—ñ–ø–∞—Å—Ç–∞ –∑ Excel
- –ü–æ–ª—è: –ù–∞–∑–≤–∞, –ö–û–î, –ü—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–æ, –ü—ñ–¥—Ä–æ–∑–¥—ñ–ª, –•–∞–±
- –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ —Ç–∞ ‚Äú—Å—É—Ö–∏–π –∑–∞–ø—É—Å–∫‚Äù
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —É Firestore `directory` (–æ–∫—Ä–µ–º—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏)

### 2. –Ü–º–ø–æ—Ä—Ç –º–∞—Ä—à—Ä—É—Ç—ñ–≤ (import/upload-routes.html)
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥–æ—Ç–æ–≤–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –∑ —Ñ–∞–π–ª—É
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ JSON —Ç–∞ ZIP (–ø–∞–ø–∫–∞ routes/)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è routeKey –ø—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —É `routes` –∫–æ–ª–µ–∫—Ü—ñ—é

---

## üë• –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å (admin.html)

### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏:
1. **–ü–µ—Ä–µ–≥–ª—è–¥ –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤**
   - Email, –†–æ–ª—å, –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–æ–ª—ñ, –•–∞–±–∏
   - –¢–µ—Å—Ç–æ–≤–∏–π —Ä–µ–∂–∏–º (testMode)

2. **–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è:**
   - –ó–º—ñ–Ω–∞ —Ä–æ–ª—ñ (admin/logist/user/security)
   - –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–æ–ª—ñ (–º–∞—Å–∏–≤)
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ö–∞–±—ñ–≤
   - –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è testMode (–±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ —Ç–µ—Å—Ç–æ–≤—ñ –º–∞—Ä—à—Ä—É—Ç–∏)

3. **–í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:**
   - –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑ Firebase Auth
   - –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑ Firestore `users/{uid}`
   - –ß–µ—Ä–µ–∑ Cloud Function `deleteUser`

4. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:**
   - Email/Password
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä–æ–ª—ñ –æ–¥—Ä–∞–∑—É

---

## ‚úÖ –ü–æ–≥–æ–¥–∂–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤ (review.html)

### –î–ª—è —Ä–æ–ª–µ–π: security, admin

### –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:
1. **–°–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –Ω–∞ –ø–æ–≥–æ–¥–∂–µ–Ω–Ω—è:**
   - –§—ñ–ª—å—Ç—Ä –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º (pending, approved, rejected)
   - –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–µ—Ç–∞–ª–µ–π –º–∞—Ä—à—Ä—É—Ç—É

2. **–î—ñ—ó:**
   - ‚úÖ **–ü–æ–≥–æ–¥–∏—Ç–∏** ‚Üí —Å—Ç–∞—Ç—É—Å "approved", –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ —É Telegram
   - ‚ùå **–í—ñ–¥—Ö–∏–ª–∏—Ç–∏** ‚Üí —Å—Ç–∞—Ç—É—Å "rejected" + –∫–æ–º–µ–Ω—Ç–∞—Ä
   - üìù **–ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—è –∑–º—ñ–Ω** ‚Üí —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è proposal (–ø—Ä–æ–ø–æ–Ω—É—î—Ç—å—Å—è –Ω–æ–≤–∏–π –º–∞—Ä—à—Ä—É—Ç)

3. **–ö–∞—Ä—Ç–∞:**
   - –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—É
   - –ì–µ–æ–∑–æ–Ω–∏ "–í—ñ–¥/–î–æ"
   - –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –æ—Ä–∏–≥—ñ–Ω–∞–ª—É —Ç–∞ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó

### Telegram –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó:
- –ü—Ä–∏ –ø–æ–≥–æ–¥–∂–µ–Ω–Ω—ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É Telegram —á–∞—Ç
- Cloudflare Worker `/send-approval`
- Fallback –Ω–∞ Firebase Function

---

## üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä (calculator.html)

### –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤–∞—Ä—Ç–æ—Å—Ç—ñ –º–∞—Ä—à—Ä—É—Ç—É:
1. **–í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ:**
   - –•–∞–±, –†—ñ–∫, –ö—É–ª—å—Ç—É—Ä–∞
   - –í—ñ–¥—Å—Ç–∞–Ω—å (–∫–º)
   - –¢–∏–ø —Ü—ñ–Ω–∏ (—Ç/–∫–º –∞–±–æ –∑–∞ —Ç–æ–Ω—É)

2. **–†–æ–∑—Ü—ñ–Ω–∫–∏:**
   - –ó–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É Firestore `pricing` —è–∫ –æ–∫—Ä–µ–º—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏
   - –ü–æ–ª—è: hub, year, crop, distFrom, distTo, priceType
   - –¶—ñ–Ω–∏ –∑ –ü–î–í / –±–µ–∑ –ü–î–í

3. **–í–∏–≤—ñ–¥:**
   - –¶—ñ–Ω–∞ –∑–∞ —Ç–æ–Ω–Ω—É
   - –¶—ñ–Ω–∞ –∑–∞ —Ç/–∫–º
   - –ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å

---

## üß≠ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è (navigate.html)

### –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–∞—Ä—à—Ä—É—Ç—É —É –Ω–∞–≤—ñ–≥–∞—Ç–æ—Ä–∞—Ö:
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—É –∑–∞ `routeId`
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–æ—Å–∏–ª–∞–Ω—å –¥–ª—è:
  - Google Maps
  - Waze
  - Apple Maps
  - Yandex Navigator
- –†–µ–∂–∏–º "–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è" —á–µ—Ä–µ–∑ Web Share API

## üó∫Ô∏è –ö–∞—Ä—Ç–∞ –¥–ª—è –ø–æ–ª—å–æ–≤–æ—ó –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó (map-viewer.html)
- –°–ø—Ä–æ—â–µ–Ω–∏–π –ø–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥ –∫–∞—Ä—Ç–∏
- –ü–æ—à—É–∫ –º—ñ—Å—Ü—å —Ç–∞ –±–∞–∑–æ–≤—ñ –¥—ñ—ó –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
- –í—Ö—ñ–¥ —á–µ—Ä–µ–∑ Firebase (–∞–±–æ –≥–æ—Å—Ç—å–æ–≤–∏–π —Ä–µ–∂–∏–º –∑–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º)

---

## üõ†Ô∏è –ê–¥–º—ñ–Ω —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏

### 1. GeoJSON Builder (admin/geojson-builder.html)
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è GeoJSON –¥–ª—è –≥–µ–æ–∑–æ–Ω
- –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–∞ –∫–∞—Ä—Ç—ñ
- –ï–∫—Å–ø–æ—Ä—Ç —Ñ–∞–π–ª—É

### 2. Tilesets Manager (admin/tilesets.html)
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è `public/config/tilesets.json`
- –î–æ–¥–∞–≤–∞–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –≥–µ–æ–∑–æ–Ω
- –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ö–∞–±—ñ–≤ –¥–ª—è –≥–µ–æ–∑–æ–Ω
- –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è/–≤–∏–º–∫–Ω–µ–Ω–Ω—è —à–∞—Ä—ñ–≤

### 3. Import Codes (admin/import-codes.html)
- –ú–∞—Å–æ–≤–∏–π —ñ–º–ø–æ—Ä—Ç –∫–æ–¥—ñ–≤ —Ç–æ—á–æ–∫
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∫–æ–¥—ñ–≤

### 4. Stats (admin/stats.html)
- –ì—Ä–∞—Ñ—ñ–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å

---

## üî• Firebase –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### Firestore –∫–æ–ª–µ–∫—Ü—ñ—ó:

#### 1. `users` ‚Äî –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
```javascript
{
  uid: "firebase-auth-uid",
  email: "user@example.com",
  displayName: "–Ü–≤–∞–Ω –Ü–≤–∞–Ω–æ–≤",
  role: "logist",                    // admin|logist|user|security|pending
  additionalRoles: ["security"],     // –¥–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–æ–ª—ñ
  allowedHubs: ["Hub1", "Hub2"],     // –¥–æ–∑–≤–æ–ª–µ–Ω—ñ —Ö–∞–±–∏ ([] = –≤—Å—ñ)
  testMode: false,                   // –±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ —Ç–µ—Å—Ç–æ–≤—ñ –º–∞—Ä—à—Ä—É—Ç–∏
  createdAt: Timestamp
}
```

#### 2. `routes` ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏
```javascript
{
  code: "auto-generated",            // –∫–æ–¥ –º–∞—Ä—à—Ä—É—Ç—É
   routeKey: "AB-1234567890",         // 2 –ª—ñ—Ç–µ—Ä–∏ + 10 —Ü–∏—Ñ—Ä
  hub: "Hub1",
  fromCode: "D001",
  fromName: "–ï–ª–µ–≤–∞—Ç–æ—Ä ‚Ññ1",
  fromLabel: "–ï–ª–µ–≤–∞—Ç–æ—Ä ‚Ññ1 ‚Ä¢ –ü—ñ–¥—Ä–æ–∑–¥—ñ–ª ‚Ä¢ –ö–æ–º–ø–∞–Ω—ñ—è",
  toCode: "D050",
  toName: "–°–∫–ª–∞–¥",
  toLabel: "–°–∫–ª–∞–¥ ‚Ä¢ –ü—ñ–¥—Ä–æ–∑–¥—ñ–ª ‚Ä¢ –ö–æ–º–ø–∞–Ω—ñ—è",
  viaPoints: [{code, name, label}],  // –ø—Ä–æ–º—ñ–∂–Ω—ñ –ø—É–Ω–∫—Ç–∏
  routeType: "–û—Å–Ω–æ–≤–Ω–∏–π",             // –û—Å–Ω–æ–≤–Ω–∏–π|–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π1|–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π2
  purpose: "–ü—à–µ–Ω–∏—Ü—è",
  distance_km: 45.3,
  points: [[lng, lat], ...],         // –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏
  segments: [...],                   // –¥–æ–º–∞–ª—å–æ–≤–∞–Ω—ñ —Å–µ–≥–º–µ–Ω—Ç–∏
  srcz: "compressed-points",         // —Å—Ç–∏—Å–Ω—É—Ç—ñ —Ç–æ—á–∫–∏ (LZ-string)
  zones: {from: {...}, to: {...}},   // –≥–µ–æ–∑–æ–Ω–∏
  logisticId: "uid",
  logisticName: "–õ–æ–≥—ñ—Å—Ç –Ü–≤–∞–Ω",
   approval: {
      status: "pending",               // pending|approved|rejected|draft
      submittedAt: Timestamp,
      submittedByUid: "uid",
      submittedByEmail: "user@example.com",
      decidedByUid: "uid",
      decidedByEmail: "user@example.com",
      decisionAt: Timestamp,
      comment: "..."
   },
  proposal: {...},                   // –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—è –∑–º—ñ–Ω
  isActive: true,                    // soft delete
  isTest: false,                     // —Ç–µ—Å—Ç–æ–≤–∏–π –º–∞—Ä—à—Ä—É—Ç
  createdAt: Timestamp,
  updatedAt: Timestamp
}
```

#### 3. `directory` ‚Äî –¥–æ–≤—ñ–¥–Ω–∏–∫ —Ç–æ—á–æ–∫ (–ø–ª–æ—Å–∫–∞ –∫–æ–ª–µ–∫—Ü—ñ—è)
```javascript
{
   name: "–ï–ª–µ–≤–∞—Ç–æ—Ä ‚Ññ1",
   nameLower: "–µ–ª–µ–≤–∞—Ç–æ—Ä ‚Ññ1",
   nameNgrams: [...],
   code: "D001",           // –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ
   company: "–ö–æ–º–ø–∞–Ω—ñ—è XYZ",
   unit: "–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª –ê",
   hub: "Hub1",
   isTest: false
}
```

#### 4. `pricing` ‚Äî —Ä–æ–∑—Ü—ñ–Ω–∫–∏ (–æ–∫—Ä–µ–º—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏)
```javascript
{
   hub: "Hub1",
   year: 2025,
   crop: "–ü—à–µ–Ω–∏—Ü—è",
   distFrom: 0,
   distTo: 50,
   priceType: "—Ç/–∫–º",       // –∞–±–æ "–∑–∞ —Ç–æ–Ω—É"
   priceNoVAT: 1.2,
   priceWithVAT: 1.44
}
```

#### 5. `visitor_sessions` ‚Äî —Å–µ—Å—ñ—ó –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á—ñ–≤
```javascript
{
  userId: "v_1732467894309_abc",
  startTime: Timestamp,
  lastHeartbeat: Timestamp,
  endTime: Timestamp | null,
  page: "/index.html",
  userAgent: "...",
  date: "2025-11-24",
  firebaseUid: "uid",                // —è–∫—â–æ —É–≤—ñ–π—à–æ–≤
  email: "user@example.com"
}
```

#### 6. `visitor_stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è—Ö
```javascript
{
  date: "2025-11-24",
  totalVisits: 150,
  uniqueVisitors: ["v_123", "v_456"],
  lastUpdate: Timestamp
}
```

#### 7. `routeKeys` ‚Äî —Ä–µ–∑–µ—Ä–≤ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∫–ª—é—á—ñ–≤ –º–∞—Ä—à—Ä—É—Ç—ñ–≤
```javascript
{
   routeId: "routeDocId",
   fromCode: "D001",
   toCode: "D050",
   fromName: "–ï–ª–µ–≤–∞—Ç–æ—Ä ‚Ññ1",
   toName: "–°–∫–ª–∞–¥",
   updatedAt: Timestamp
}
```

#### 8. `route_logs` ‚Äî –∂—É—Ä–Ω–∞–ª –∑–º—ñ–Ω –º–∞—Ä—à—Ä—É—Ç—ñ–≤
```javascript
{
   routeId: "routeDocId",
   routeKey: "AB-1234567890",
   type: "created|updated|deleted",
   ts: Timestamp,
   changes: [...],
   actor: {
      updatedByUid: "uid",
      updatedByEmail: "user@example.com",
      decidedByUid: "uid",
      decidedByEmail: "user@example.com"
   }
}
```

### Firestore –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–ø–µ–∫–∏ (firestore.rules):
- –ß–∏—Ç–∞–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤: –∑–∞ —Ä–æ–ª–ª—é + —Ö–∞–±–∞–º–∏
- –ó–∞–ø–∏—Å –º–∞—Ä—à—Ä—É—Ç—ñ–≤: admin, logist (—Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó —Ö–∞–±–∏)
- –ü–æ–≥–æ–¥–∂–µ–Ω–Ω—è: admin, security
- –î–æ–≤—ñ–¥–Ω–∏–∫: —á–∏—Ç–∞–Ω–Ω—è –≤—Å—ñ–º, –∑–∞–ø–∏—Å admin/logist
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ: —á–∏—Ç–∞–Ω–Ω—è —Å–≤–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—é, –∑–∞–ø–∏—Å —Ç—ñ–ª—å–∫–∏ admin
- –†–æ–∑—Ü—ñ–Ω–∫–∏: —á–∏—Ç–∞–Ω–Ω—è –≤—Å—ñ–º, –∑–∞–ø–∏—Å admin
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: —Ç—ñ–ª—å–∫–∏ admin
- routeKeys: —á–∏—Ç–∞–Ω–Ω—è writer, –∑–∞–ø–∏—Å admin/security
- route_logs: create/read admin/security/logist (append-only)

---

## ‚òÅÔ∏è Cloud Functions (functions/index.js)

### 1. `telegramSendApproval`
- HTTP –µ–Ω–¥–ø–æ—ñ–Ω—Ç –¥–ª—è Telegram –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π
- POST `/api/telegram/send-approval`
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É —á–∞—Ç –ø—Ä–∏ –ø–æ–≥–æ–¥–∂–µ–Ω–Ω—ñ –º–∞—Ä—à—Ä—É—Ç—É

### 2. `saveRoute`
- –°–µ—Ä–≤–µ—Ä–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—É (fallback)
- POST `/api/routes/save`
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö + –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è `routeKey`

### 3. `approveRoute`
- –ü–æ–≥–æ–¥–∂–µ–Ω–Ω—è/–≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—É
- POST `/api/routes/approve`
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è `approval` —Å—Ç–∞—Ç—É—Å—É

### 4. `deleteUser`
- –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- POST `/api/users/delete`
- –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑ Auth + Firestore

### 5. `routeLogOnCreate` / `routeLogOnUpdate` / `routeLogOnDelete`
- –¢—Ä–∏–≥–µ—Ä–∏ –¥–ª—è –∑–∞–ø–∏—Å—É –∂—É—Ä–Ω–∞–ª—É –∑–º—ñ–Ω —É `route_logs`
- –§—ñ–∫—Å—É—é—Ç—å –∫–ª—é—á–æ–≤—ñ –ø–æ–ª—è —Ç–∞ –∞–≤—Ç–æ—Ä–∞ –∑–º—ñ–Ω

### –°–µ–∫—Ä–µ—Ç–∏:
- `TELEGRAM_BOT_TOKEN`
- `TELEGRAM_CHAT_ID`

---

## üåê Cloudflare Worker (cloudflare-worker/)

### –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:
–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Firebase Function –¥–ª—è Telegram (—à–≤–∏–¥—à–µ, –¥–µ—à–µ–≤—à–µ).

### –ï–Ω–¥–ø–æ—ñ–Ω—Ç:
`https://route-telegram-endpoint.route-project25.workers.dev/send-approval`

### –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:
- `TELEGRAM_BOT_TOKEN`
- `TELEGRAM_CHAT_ID`
- `ALLOWED_ORIGINS` ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö –¥–æ–º–µ–Ω—ñ–≤ (CORS)

---

## üé® –î–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º–∞ (styles/common.css)

### CSS –∑–º—ñ–Ω–Ω—ñ:
```css
--primary: #6366f1       /* –û—Å–Ω–æ–≤–Ω–∏–π —Ñ—ñ–æ–ª–µ—Ç–æ–≤–∏–π */
--primary-dark: #4f46e5
--success: #22c55e
--danger: #ef4444
--warning: #f59e0b
--spacing-*: 4px, 8px, 12px, 16px, 24px, 32px
--radius-*: 4px, 8px, 12px, 16px
--shadow-*: —Ç—ñ–Ω—ñ —Ä—ñ–∑–Ω–æ—ó –≥–ª–∏–±–∏–Ω–∏
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:
- `.btn` ‚Äî –∫–Ω–æ–ø–∫–∏ (primary, secondary, success, danger, ghost)
- `.card` ‚Äî –∫–∞—Ä—Ç–∫–∏ –∑ —Ç—ñ–Ω–Ω—é
- `.form-input`, `.form-select` ‚Äî —Ñ–æ—Ä–º–∏
- `.badge` ‚Äî –±–µ–π–¥–∂—ñ
- `.alert` ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- `.header` ‚Äî —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π header –∑ –≥—Ä–∞–¥—ñ—î–Ω—Ç–æ–º

### Header –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (styles/header.js):
- `generateAppHeader(currentPage)` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è HTML
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –º–µ–Ω—é –∑–∞ —Ä–æ–ª–ª—é
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤—Å—Ç–∞–≤–∫–∞ —á–µ—Ä–µ–∑ `initAppHeader()`

---

## üöÄ –î–µ–ø–ª–æ–π

### –õ–æ–∫–∞–ª—å–Ω–∏–π —Ä–æ–∑—Ä–æ–±–Ω–∏—Ü—å–∫–∏–π —Å–µ—Ä–≤–µ—Ä:
```bash
npm install
npm start
# http://localhost:3000
```

### Firebase Hosting:
```bash
# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Firebase CLI
npm install -g firebase-tools

# –í—Ö—ñ–¥
firebase login

# –î–µ–ø–ª–æ–π –≤—Å—å–æ–≥–æ
firebase deploy

# –ê–±–æ –æ–∫—Ä–µ–º–æ:
firebase deploy --only hosting
firebase deploy --only firestore:rules
firebase deploy --only firestore:indexes
firebase deploy --only functions
```

### Cloudflare Worker:
```bash
cd cloudflare-worker
npm install -g wrangler
wrangler login
wrangler deploy
```

---

## üîß –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

### `.env` (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ server.js):
```env
PORT=3000
USER1=admin
PASS1=securepassword
USER2=user
PASS2=password123
TELEGRAM_BOT_TOKEN=your_token
TELEGRAM_CHAT_ID=your_chat_id
```

### Firebase Functions —Å–µ–∫—Ä–µ—Ç–∏:
```bash
firebase functions:secrets:set TELEGRAM_BOT_TOKEN
firebase functions:secrets:set TELEGRAM_CHAT_ID
```

### Cloudflare Worker —Å–µ–∫—Ä–µ—Ç–∏:
```bash
wrangler secret put TELEGRAM_BOT_TOKEN
wrangler secret put TELEGRAM_CHAT_ID
wrangler secret put ALLOWED_ORIGINS
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å

### –Ø–∫ –ø—Ä–∞—Ü—é—î:
1. **–¢—Ä–µ–∫—ñ–Ω–≥:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Å—Ç–∞—Ä—Ç —Å–µ—Å—ñ—ó –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
   - Heartbeat –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥
   - –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Å–µ—Å—ñ—ó –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ

2. **–£–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å:**
   - Visitor ID –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —É localStorage
   - –§–æ—Ä–º–∞—Ç: `v_{timestamp}_{random}`

3. **Firestore:**
   - `visitor_sessions` ‚Äî –≤—Å—ñ —Å–µ—Å—ñ—ó
   - `visitor_stats` ‚Äî –∞–≥—Ä–µ–≥–æ–≤–∞–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è—Ö

4. **–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è (—Ç—ñ–ª—å–∫–∏ admin):**
   - –ö–Ω–æ–ø–∫–∞ "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" —É header
   - Dropdown –ø–∞–Ω–µ–ª—å –∑ –º–µ—Ç—Ä–∏–∫–∞–º–∏
   - –ê–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–∂–Ω—ñ 30 —Å–µ–∫

### –Ü–Ω–¥–µ–∫—Å–∏ Firestore:
```javascript
// visitor_sessions
{
  collectionGroup: "visitor_sessions",
  queryScope: "COLLECTION",
  fields: [
    { fieldPath: "date", order: "ASCENDING" },
    { fieldPath: "lastHeartbeat", order: "DESCENDING" }
  ]
}
```

---

## üß™ –¢–µ—Å—Ç–æ–≤–∏–π —Ä–µ–∂–∏–º

### –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:
- –ü–æ–ª–µ `testMode: true` —É `users/{uid}`
- –ë–∞—á–∞—Ç—å —Ç—ñ–ª—å–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∏ –∑ `isTest: true`
- –ê–±–æ –º–∞—Ä—à—Ä—É—Ç–∏ –º—ñ–∂ —Ç–µ—Å—Ç–æ–≤–∏–º–∏ —Ç–æ—á–∫–∞–º–∏ (–∫–æ–¥/–Ω–∞–∑–≤–∞ –º—ñ—Å—Ç–∏—Ç—å "—Ç–µ—Å—Ç")

### –î–ª—è –∞–¥–º—ñ–Ω–∞:
- –ß–µ–∫–±–æ–∫—Å "üß™ –¢—ñ–ª—å–∫–∏ —Ç–µ—Å—Ç–æ–≤—ñ –º–∞—Ä—à—Ä—É—Ç–∏" –Ω–∞ export
- –§—ñ–ª—å—Ç—Ä `isTest == true` —É Firestore
- –í—ñ–∑—É–∞–ª—å–Ω–µ –≤–∏–¥—ñ–ª–µ–Ω–Ω—è –∂–æ–≤—Ç–∏–º —Ñ–æ–Ω–æ–º

### –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:
- –ë–µ–∑–ø–µ—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑ –∑–∞–±—Ä—É–¥–Ω–µ–Ω–Ω—è production –¥–∞–Ω–∏—Ö
- –õ–µ–≥–∫–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö —Ç–µ—Å—Ç–æ–≤–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤

---

## üîç Firestore Viewer (Firestore_Viewe.html)

### –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:
- –ü–µ—Ä–µ–≥–ª—è–¥ –≤—Å—ñ—Ö –∫–æ–ª–µ–∫—Ü—ñ–π
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è
- –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- –í–∏–¥–∞–ª–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- –ï–∫—Å–ø–æ—Ä—Ç —É JSON
- –¢—ñ–ª—å–∫–∏ –¥–ª—è admin

---

## üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω

### –ë—Ä–µ–π–∫–ø–æ—ñ–Ω—Ç–∏:
- Desktop: > 980px
- Tablet: 768px - 980px
- Mobile: < 768px

### –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:
- –ú–æ–±—ñ–ª—å–Ω–µ –º–µ–Ω—é (burger)
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Ç–∞–±–ª–∏—Ü—è (horizontal scroll)
- Touch-friendly –∫–Ω–æ–ø–∫–∏
- Responsive –∫–∞—Ä—Ç–∏

---

## üåç –õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è

### –ú–æ–≤–∞: –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ (UK)
- –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–≤–Ω—ñ—Å—Ç—é —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é
- –ü—ñ–¥–ø–∏—Å–∏ –Ω–∞ –∫–∞—Ä—Ç—ñ: `name_uk` ‚Üí `name_ru` ‚Üí `name_en` ‚Üí `name`
- –§–æ—Ä–º–∞—Ç–∏ –¥–∞—Ç: `DD.MM.YYYY HH:MM:SS`

---

## üîí –ë–µ–∑–ø–µ–∫–∞

### –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è:
- Firebase Authentication
- Session persistence: LOCAL
- Auto-logout –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Firestore user existence

### Firestore Security:
- Rules based –Ω–∞ —Ä–æ–ª—ñ + —Ö–∞–±–∏
- Read/Write –æ–±–º–µ–∂–µ–Ω–Ω—è
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ

### CORS:
- Cloudflare Worker: ALLOWED_ORIGINS
- Firebase Functions: cors: true

### Secrets:
- `.env` –Ω–µ –≤ git (.gitignore)
- Firebase secrets (defineSecret)
- Wrangler secrets

---

## üìà –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è

### Firebase Console:
- Authentication users
- Firestore data
- Functions logs
- Hosting logs

### Cloudflare Dashboard:
- Worker analytics
- Requests/errors
- Performance metrics

### Browser Console:
- –ü–æ–º–∏–ª–∫–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —É –∫–æ–Ω—Å–æ–ª—ñ
- –î—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ñ –ª–æ–≥–∏ (testMode, role sync)

---

## üêõ –í—ñ–¥–æ–º—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è

1. **Firestore where() –æ–±–º–µ–∂–µ–Ω–Ω—è:**
   - –ú–∞–∫—Å–∏–º—É–º 10 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É `where('hub', 'in', [...])`
   - –Ü–Ω–¥–µ–∫—Å–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤

2. **Mapbox Directions API:**
   - –ú–∞–∫—Å–∏–º—É–º 25 waypoints –∑–∞ –∑–∞–ø–∏—Ç
   - Rate limits (600 req/min)

3. **Excel –µ–∫—Å–ø–æ—Ä—Ç:**
   - –í–µ–ª–∏–∫—ñ —Ç–∞–±–ª–∏—Ü—ñ (>10000 —Ä—è–¥–∫—ñ–≤) –º–æ–∂—É—Ç—å –≥–∞–ª—å–º—É–≤–∞—Ç–∏ –±—Ä–∞—É–∑–µ—Ä

4. **–¢–µ—Å—Ç–æ–≤–∏–π —Ä–µ–∂–∏–º:**
   - –ù–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ —Å—Ç–∞—Ä–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –±–µ–∑ `isTest` –ø–æ–ª—è

---

## üìö –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

### Frontend:
- Firebase JS SDK 10.12.2 (compat)
- Mapbox GL JS 2.15.0
- SheetJS (xlsx) 0.18.5
- LZ-String 1.5.0
- JSZip 3.10.1

### Backend (server.js):
- Express 5.1.0
- dotenv 17.2.1
- express-basic-auth 1.2.1
- node-fetch 3.3.2

### Cloud Functions:
- firebase-functions v2
- firebase-admin

### Cloudflare Worker:
- Wrangler 3.x

---

## üéì –ù–∞–≤—á–∞–ª—å–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:
- [Firebase](https://firebase.google.com/docs)
- [Mapbox GL JS](https://docs.mapbox.com/mapbox-gl-js/api/)
- [Firestore Security Rules](https://firebase.google.com/docs/firestore/security/get-started)
- [Cloudflare Workers](https://developers.cloudflare.com/workers/)

### README —Ñ–∞–π–ª–∏ –ø—Ä–æ–µ–∫—Ç—É:
- `DEPLOY_STATS.md` ‚Äî –¥–µ–ø–ª–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `VISITOR_STATS_README.md` ‚Äî —Ä–æ–±–æ—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `public/export/README.md` ‚Äî –µ–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª
- `public/styles/README.md` ‚Äî –¥–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º–∞

---

## üí° –ü–æ—Ä–∞–¥–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤

### 1. –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞:
```bash
# Terminal 1: Firebase emulators
firebase emulators:start

# Terminal 2: Local server
npm start
```

### 2. –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è:
- DevTools ‚Üí Application ‚Üí IndexedDB (Firebase cache)
- Console –ª–æ–≥–∏ –∑ –ø—Ä–µ—Ñ—ñ–∫—Å–∞–º–∏ `[componentName]`
- Network tab –¥–ª—è Firestore/API –∑–∞–ø–∏—Ç—ñ–≤

### 3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–ª–µ–π:
- –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ä–æ–ª—è–º–∏
- –£–≤—ñ–º–∫–Ω—É—Ç–∏ testMode –¥–ª—è –±–µ–∑–ø–µ—á–Ω–∏—Ö –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ñ–≤
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Firestore rules —É –µ–º—É–ª—è—Ç–æ—Ä—ñ

### 4. –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è:
- –ö–µ—à—É–≤–∞—Ç–∏ –¥–æ–≤—ñ–¥–Ω–∏–∫ —É localStorage
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ onSnapshot —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- –û–±–º–µ–∂—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å live listeners

---

## üö® Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Permission denied" —É Firestore
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `firestore.rules`, –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—å —â–æ —Ä–æ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–∞—Ä—Ç–∞ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Mapbox token —É `config/config.js`

### –ü—Ä–æ–±–ª–µ–º–∞: Telegram –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `TELEGRAM_BOT_TOKEN` —Ç–∞ `TELEGRAM_CHAT_ID` —É —Å–µ–∫—Ä–µ—Ç–∞—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –º–æ–∂–µ —É–≤—ñ–π—Ç–∏ –ø—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è
**–†—ñ—à–µ–Ω–Ω—è:** –û—á–∏—Å—Ç–∏—Ç–∏ localStorage —Ç–∞ cookies –±—Ä–∞—É–∑–µ—Ä–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –ì–µ–æ–∑–æ–Ω–∏ –Ω–µ –ø—ñ–¥—Å–≤—ñ—á—É—é—Ç—å—Å—è
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `tilesets.json`, –ø–µ—Ä–µ—Å–≤—ñ–¥—á–∏—Ç–∏—Å—å —â–æ `enabled: true` —Ç–∞ layer —ñ—Å–Ω—É—î

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

- **–ü—Ä–æ–µ–∫—Ç:** my-map-app-v2
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:** routeproject25-debug/my-map-app-v2
- **Firebase Project:** route-project-ba7c6
- **Cloudflare Worker:** route-telegram-endpoint.route-project25.workers.dev

---

## üìÖ –Ü—Å—Ç–æ—Ä—ñ—è –≤–µ—Ä—Å—ñ–π

### v2.0 (–ü–æ—Ç–æ—á–Ω–∞)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ —Ä–æ–ª—è–º–∏
- ‚úÖ –•–∞–±-–±–∞–∑–æ–≤–∞–Ω–∏–π –¥–æ—Å—Ç—É–ø
- ‚úÖ –¢–µ—Å—Ç–æ–≤–∏–π —Ä–µ–∂–∏–º
- ‚úÖ –ï–∫—Å–ø–æ—Ä—Ç —É –º–Ω–æ–∂–∏–Ω–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å
- ‚úÖ –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –¥–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ Cloudflare Worker –¥–ª—è Telegram
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö —Å–µ—Å—ñ–π

### v1.0 (–ü–æ—á–∞—Ç–∫–æ–≤–∞)
- –ë–∞–∑–æ–≤–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –∫–∞—Ä—Ç–∏
- –ü—Ä–æ—Å—Ç–∏–π –µ–∫—Å–ø–æ—Ä—Ç
- –û–¥–Ω–∞ —Ä–æ–ª—å –Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

---

## üéØ Roadmap (–º–∞–π–±—É—Ç–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ)

- [ ] Microsoft OAuth (–ø—Ä–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –ø–ª–∞—Ç–Ω–æ–≥–æ Azure)
- [ ] –ü–∞–∫–µ—Ç–Ω–µ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤
- [ ] –Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω (changelog)
- [ ] –ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ (PWA)
- [ ] Offline —Ä–µ–∂–∏–º
- [ ] –ì—Ä–∞—Ñ—ñ–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (Charts.js)
- [ ] –ï–∫—Å–ø–æ—Ä—Ç —É PDF
- [ ] API –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π
- [ ] Webhooks –¥–ª—è –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å–∏—Å—Ç–µ–º

---

**–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó:** 11 –≥—Ä—É–¥–Ω—è 2025  
**–í–µ—Ä—Å—ñ—è:** 2.0  
**–ê–≤—Ç–æ—Ä:** AI Assistant (–Ω–∞ –±–∞–∑—ñ –∞–Ω–∞–ª—ñ–∑—É –∫–æ–¥—É –ø—Ä–æ–µ–∫—Ç—É)
